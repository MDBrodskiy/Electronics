%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Written By Michael Brodskiy
% Class: Fundamentals of Electronics
% Professor: M. Onabajo
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\include{Includes.tex}

\title{Homework 2}
\date{\today}
\author{Michael Brodskiy\\ \small Professor: M. Onabajo}

\begin{document}

\maketitle

\begin{enumerate}

  \item

    We may begin to write KCL equations for the circuit. Let us call the voltage at the negative (upper) terminal $V^{-}$, the voltage at the bottom terminal $V^{+}$, and the voltages on the nodes $V_1$ and $V_2$. With this, we get:

    $$\frac{V^{-}-V_{in}}{R}+\frac{V^{-}-V_1}{R}=0$$
    $$V^{-}=0$$
    $$V_{in}=-V_{1}$$

    We write the next KCL:

    $$\frac{V_1-V^{-}}{R}+\frac{V_1}{R}+\frac{V_1-V_2}{R}=0$$
    $$\frac{2V_1}{R}+\frac{V_1-V_2}{R}=0$$
    $$V_2=-3V_1$$

    And finally the last KCL:

    $$\frac{V_2-V_1}{R}+\frac{V_2}{R}+\frac{V_2-V_o}{R}=0$$
    $$3V_2-V_1=V_o$$

    Combining with our first two KCL equations, we get:

    $$-8V_{in}=V_o$$
    $$\boxed{\frac{V_o}{V_{in}}=-8}$$

  \item

    \begin{enumerate}

      \item 

        We begin by writing:

        $$V_{s}-1000I_{s}-1000000I=0$$
        $$V_{s}=1000I_{s}+1000000I$$

        Where:

        $$v_{i}=1000000I$$

        Using KVL, we find:

        $$v_i-10000(I_s-I)-25(I_s-I)-100000v_i=0$$
        $$-10000(I_s-I)-25(I_s-I)\approx 100000v_i$$
        $$-10025(I_s-I)\approx 100000v_i$$
        $$v_i\approx -.10025(I_s-I)$$

        Since we know $v_i=1000000I$, we can write:

        $$100000I=-.10025(I_s-I)$$
        $$-(9.975\cdot10^6)I=I_s-I$$
        $$-(9.975\cdot10^6)I=I_s$$

        We can substitute this back into our first equation to find:

        $$V_s=-9.974\cdot10^6I$$

        Then we can once again use KVL to write:

        $$v_o-25(I_s-I)-10^{11}I=0$$
        $$v_o=25I_s-10^{11}I$$
        $$v_o=9.975\cdot10^{10}I$$

        Therefore, we may say that:

        $$\boxed{\frac{v_o}{V_s}\approx -10001}$$

        We can tell that the finite gain is approximately one-tenth of the ideal op-amp gain.

      \item 

        To find the impedance, we can use our equations from part (a) to write:

        $$Z_{in}=\frac{}$$

      \item 

    \end{enumerate}

  \item

    \begin{enumerate}

      \item 

        We begin by calculating the impedance from the capacitor:

        $$z_c=-\frac{j}{\omega C}$$

        We can tell that the output voltage is:

        $$V_o=A_{OL}V^{-}$$

        From here, we apply KCL:

        $$j\omega C(V^{-}-V_i)+\frac{V^{-}-V_o}{R}=0$$

        And substitute from the equation above:

        $$j\omega RC(V^{-}-V_i)+V^{-}-A_{OL}V^{-}=0$$
        $$j\omega RCV_i=j\omega RCV^{-}+V^{-}-A_{OL}V^{-}$$

        This gives us the input voltage:

        $$V_i=V^{-}+\frac{V^{-}-A_{OL}V^{-}}{j\omega RC}$$
        $$V_i=\frac{j\omega RCV^{-}+V^{-}-A_{OL}V^{-}}{j\omega RC}$$
        $$V_i=\frac{V^{-}(j\omega RC+1-A_{OL})}{j\omega RC}$$

        We then take the ratio of the output to input and find the closed loop voltage gain:

        $$A_{CL}=\frac{V_o}{V_i}$$
        $$\boxed{A_{CL}(j\omega)=\frac{j\omega RCA_{OL}}{1+j\omega RC-A_{OL}}}$$

      \item 

        With an ideal op-amp, we know $A_{OL}\to\infty$. Thus, we may refactor our finding from (a) to write:

        $$A_{CL}(j\omega)=\frac{j\omega RC}{(1/A_{OL})(1+j\omega RC)-1}$$

        We know that, as $A_{OL}\to\infty$, $1/A_{OL}\to0$, which gives us:

        $$A_{CL}^i(j\omega)=-j\omega RC$$

        This gives us a magnitude of:

        $$\boxed{|A_{CL}^i(j\omega)|=\omega RC}$$

      \item 

        Using our equation from part (a), we may write:

        $$A_{CL}=\frac{j(1000\pi)(10000)(20\cdot10^{-6})(10^4)}{1+j(1000\pi)(10000)(20\cdot10^{-6})-10^4}$$
        $$A_{CL}=\frac{j(1000\pi)(100)(20)}{1+j(10\pi)(20)-10^4}$$
        $$A_{CL}=\frac{(2\cdot10^6)\pi j}{j(200\pi)-9999}$$
        $$A_{CL}=39.331-625.910j$$

        Now we find the magnitude:

        $$|A_{CL}|=\sqrt{39.331^2+625.910^2}$$
        $$|A_{CL}|=627.14$$

        Now we use the input amplitude to get the output amplitude:

        $$|V_o|=|A_{CL}||V_i|$$
        $$|V_o|=(627.14)(5\cdot10^{-3})$$
        $$\boxed{|V_o|=3.1357[\si{\volt}]}$$

    \end{enumerate}

  \item

    \begin{enumerate}

      \item 

        To start, it is given that the output voltage is:

        $$V_o=.1[\si{\volt}]$$

        Offset voltage can be found using the equation:

        $$V_{IO}=\left( 1+\frac{R_2}{R_1} \right)^{-1}V_o$$
        $$V_{IO}=\left( 1+\frac{100}{10} \right)^{-1}(.1)$$
        $$V_{IO}=\left( 11 \right)^{-1}(.1)$$
        $$\boxed{V_{IO}=.00909[\si{\volt}]}$$

      \item 

        The input bias current may be written as:

        $$I_B=\frac{I_B^++I_B^-}{2}$$

        Using KVL, we may write:

        $$V_o-V^-=I_B^-R_2$$

        Since the DC input voltage is zero, we know:

        $$V^-=V^+=0$$

        Therefore, we get:

        $$V_o=I_B^-R_2$$

        and since the terminals are balanced:

        $$I_B^-=I_B^+$$

        Which gives us:

        $$I_B^-=\frac{V_o}{R_2}$$
        $$I_B^-=\frac{.1}{100000}$$
        $$\boxed{I_B=I_B^-=I_B^+=1\cdot10^{-6}[\si{\ampere}]}$$

      \item 

        We need to place a compensating resistor on the positive terminal to ground in order to cancel the effects. This gives us:

        $$V^{+}=-I_B^{+}R_c$$

        Applying KCL, we find:

        $$I_B^{-}=-\frac{V^-}{R_1}+\frac{V_o-V^-}{R_2}$$
        $$I_B^{-}=-V^\left[ 10^{-4}+10^{-5} \right]$$
        $$I_B^{-}=.00011I_B^+R_c$$

        Since the two bias currents equal each other, we get:

        $$1=.00011R_c$$
        $$\boxed{R_c=9090.9[\si{\ohm}]}$$

      \item 

        The maximum offset current may be found using:

        $$I_o=\frac{V_o}{R_2+R_c}$$

        Using our known values, we substitute:

        $$I_o=\frac{.1}{10^5+9090.9}$$
        $$\boxed{I_o=9.167\cdot10^{-7}[\si{\ampere}]}$$

    \end{enumerate}

  \item

    \begin{enumerate}

      \item 

        The slew rate may be defined as:

        $$SR=\frac{dV_o}{dt}$$

        Since we know a sinusoidal input will generate an output of the form $V_o=|V|\sin(\omega t)$, we can write:

        $$\frac{dV_o}{dt}=|V|\omega\cos(\omega t)$$

        From this, we may determine that the maximum slew rate is:

        $$SR=|V|\omega$$
        $$SR=|V|2\pi f$$
        $$SR=(4)(2)(\pi)(10^6)$$
        $$\boxed{SR=2.51\cdot10^7\left[ \frac{\si{\volt}}{\si{\second}} \right]}$$

      \item 

      \item 

    \end{enumerate}

  \item

    \begin{enumerate}

      \item 

      \item 

      \item 

      \item 

      \item 

    \end{enumerate}

\end{enumerate}

\end{document}

